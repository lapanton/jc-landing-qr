(function(){function b(c,a,b,d,k){c=c[a];b=isNaN(c)?b:c<d?d:c>k?k:c;return b}function q(c,a,b,d){return"hsl("+c+","+a+"%,"+d*b+"%)"}function B(c,a,b,d){b=d*b*a;a=Math.max(c-b,0);c=Math.min(c+b,d);return Math.round(a+Math.random()*(c-a))}function k(c,a,b){this.parent=this.__stage=this.__context=null;this.__name=void 0;this.rotation=this.x=this.y=0;this.scaleX=this.scaleY=1;this.originX=this.originY=0;this.alpha=1;this.width=c||0===c?c:150;this.height=a||0===a?a:100;this.color=b||"black";this.matrixLocal=
void 0;this.matrixGlobal=r.ZERO;this.useDeepHitTest=!1;this.calcOwnMatrices=this.calc;Ua.init(this)}function C(c,a){function U(){this.super();var a=new k(s,Math.abs(D)+2*I+t+n,ia),c=new k(s+1,Math.abs(D)+2*I+t+n,va);c.x=-s;this.topContatiner=new J;this.top=new k(h,h,"hsl("+K+","+L+"%,"+M+"%)");this.top.rotation=45;this.topContatiner.addChild(this.top);N&&(this.shadow=new k(h,h),this.shadow.rotation=45,this.hasShadow=!1);this.topContatiner.y=-n;this.topContatiner.scaleY=.995*z;this.addChild(c);this.addChild(a);
this.addChild(this.topContatiner);this.neighbours=[]}function V(){this.super();var a=r(K,L,M);this.H=B(a.h,u,W,360);this.S=B(a.s,u,X,100);this.L=B(a.l,u,Y,100);this.SH=this.H+ja;this.SS=this.S+ka;this.SL=this.L+la;var a=new k(s,Math.abs(D)+2*I+t+n,q(this.SH,this.SS,this.SL,1-l)),c=new k(s+1,Math.abs(D)+2*I+t+n,q(this.SH,this.SS,this.SL,.5+.5*(1-l)));c.x=-s;this.topContatiner=new J;this.top=new k(h,h,"hsl("+this.H+","+this.S+"%,"+this.L+"%)");this.top.rotation=45;this.topContatiner.addChild(this.top);
N&&(this.shadow=new k(h,h),this.shadow.rotation=45,this.hasShadow=!1);this.topContatiner.y=-n;this.topContatiner.scaleY=.995*z;this.addChild(c);this.addChild(a);this.addChild(this.topContatiner);this.neighbours=[]}function r(a,c,f){return{h:B(a,u,W,360),s:B(c,u,X,100),l:B(f,u,Y,100)}}function H(){var a,c;ma=u*(W+X+Y)?V:U;O.y=-n;for(var f=0;f<Z;f++){g[f]=[];$=f*wa;f%2?(m=na,P=A-1):(m=0,P=A);for(var b=0;b<P;b++)e=g[f][b]=new ma,e.x=m+2*b*na,e.y=e.yInit=$,O.addChild(e),m?(e.neighbours.push(g[f-1][b]),
e.neighbours.push(g[f-1][b+1]),g[f-1][b].neighbours.push(e),g[f-1][b+1].neighbours.push(e)):$&&(b?(e.neighbours.push(g[f-1][b-1]),g[f-1][b-1].neighbours.push(e),b<P-1&&(e.neighbours.push(g[f-1][b]),g[f-1][b].neighbours.push(e))):(e.neighbours.push(g[f-1][b]),g[f-1][b].neighbours.push(e))),"wave"==oa?(a=pa,c="top-left"==v?((m?f+1:f)/2+b)/p*2*Math.PI:"bottom-left"==v?2*Math.PI*((m?f+1:f)/2+A-(m?2:1)-b)*(1-1/p):"top-right"==v?((m?f+1:f)/2+A-(m?2:1)-b)/p*2*Math.PI:"top"==v?f/p*2*Math.PI:"bottom"==v?2*
Math.PI*f*(1-1/p):"right"==v?2*Math.PI*(m?2*b+1:2*b)*(1-1/p):"left"==v?2*Math.PI*(m?2*b+1:2*b)/p:2*Math.PI*((m?f+1:f)/2+b)*(1-1/p)):(a=pa+xa*Math.random(),c=2*Math.PI*Math.random()),e.swing=new Va(e,"y",{wave:ya[za],amplitude:E,frequency:a,phase:c}),E&&e.swing.play()}w.listenersTotal()||w.addListener(Aa);F=Q.length;document.addEventListener("mousemove",aa);w.addUpdateListener(ba,"updateBricks")}function Ba(){F&&(document.removeEventListener("mousemove",aa),w.removeUpdateListener(ba,"updateBricks"),
g.length=Q.length=F=0,w.removeAllListeners())}function Ca(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow((a.yInit-b.y)/z,2))}function Da(a){var b=Ca(a,R);b<qa?(a.active=!0,b=a.yInit+D*(1-b/qa),a.swing.baseValue+=.15*(b-a.swing.baseValue),Ea.run(a.swing,{baseValue:b},Wa,500)):a.active&&(a.swing.baseValue+=.15*(a.yInit-a.swing.baseValue),Ea.run(a.swing,{baseValue:a.yInit},Fa,Ga),a.active=!1)}function aa(a){ca=!0;R=x.getMousePoint(a);R.y+=n}function S(a){x.width=G.clientWidth;x.height=G.clientHeight;
newColumnLength=2+2*Math.ceil(x.height/(ra+T*z));newOddRowLength=1+Math.ceil(x.width/(sa+T/2));if(newColumnLength!=Z||newOddRowLength!=A)Z=newColumnLength,A=newOddRowLength,Ba(),H();x.$()}var G=document.getElementById(c);if(G){C.instances[c]&&C.instances[c].destroy();C.instances[c]=this;a||(a={});var h=b(a,"BRICK_SIZE",100,10,d),t=b(a,"BRICK_SPACING",6,0,d),Ha=b(a,"CAMERA_ANGLE",30,20,90),Ia="BRICK_COLOR"in a?a.BRICK_COLOR:"rgb(249, 250, 251)",u=b(a,"BRICK_COLOR_RANDOMIZATION",0,0,1),W=b(a,"BRICK_COLOR_HUE_RANDOMIZATION",
1,0,1),X=b(a,"BRICK_COLOR_SATURATION_RANDOMIZATION",1,0,1),Y=b(a,"BRICK_COLOR_LIGHTNESS_RANDOMIZATION",1,0,1),Ja=b(a,"BRICK_COLOR_HUE_OFFSET",0,y,d),Ka=b(a,"BRICK_COLOR_SATURATION_OFFSET",0,y,d),La=b(a,"BRICK_COLOR_LIGHTNESS_OFFSET",0,y,d),ja=b(a,"SHADOW_COLOR_HUE_OFFSET",0,y,d),ka=b(a,"SHADOW_COLOR_SATURATION_OFFSET",0,y,d),la=b(a,"SHADOW_COLOR_LIGHTNESS_OFFSET",0,y,d),l=b(a,"SHADOW_CONTRAST",.5,0,1),za="SWING_TYPE"in a&&a.SWING_TYPE in ya?a.SWING_TYPE:"sine",oa="SWING_DISTRIBUTION"in a?a.SWING_DISTRIBUTION:
"random",E=b(a,"SWING_AMPLITUDE",6,y,d),pa=b(a,"SWING_FREQUENCY","random"==oa?.1:.3,1E-5,d),xa=b(a,"SWING_FREQUENCY_RANDOMIZATION",0,0,d),v="SWING_WAVE_DIRECTION"in a?a.SWING_WAVE_DIRECTION:"bottom-right",p=b(a,"SWING_WAVE_LENGTH",15,2,d),D=b(a,"MOUSE_IMPACT_FACTOR",h/2,y,d),qa=b(a,"MOUSE_IMPACT_RADIUS",Math.max(200,h),h,d),Ma="BRICK_RELEASE_TYPE"in a&&a.BRICK_RELEASE_TYPE in Xa?a.BRICK_RELEASE_TYPE:"normal",Ga=1E3*b(a,"BRICK_RELEASE_TIME",1.5,.01,d),Na=b(a,"BRICK_RELEASE_NORMAL_CURVE",3,.01,d),Oa=
b(a,"BRICK_RELEASE_ELASTIC_CURVE",4,1,d),Pa=Math.ceil(b(a,"BRICK_RELEASE_ELASTIC_FREQUENCY",11,1,d)),Qa=b(a,"BRICK_RELEASE_BOUNCE_CURVE",.25,.01,1),Ra=Math.ceil(b(a,"BRICK_RELEASE_BOUNCE_FREQUENCY",5,1,d)),N="USE_MOVING_SHADOW"in a?a.USE_MOVING_SHADOW:!0,ta=b(a,"MOVING_SHADOW_SIZE_RATIO",3,.1,d),E=-1*E;0===t&&(t=-1.5);var z=Math.tan(Ha*Math.PI/360),sa=h*Math.SQRT2,s=h*Math.SQRT1_2,ra=sa*z,n=ra/2,T=t*Math.SQRT2,wa=n+T*z,na=s+T/2,I=Math.abs(E),da=Ya(Ia),K=da.h+Ja,L=da.s+Ka,M=da.l+La,ea=K+ja,fa=L+ka,
ga=M+la,va=q(ea,fa,ga,.5+.5*(1-l)),ia=q(ea,fa,ga,1-l),Aa=function(){},ua=function(){var a=document.createElement("canvas");Za.set(a,{position:"relative",backgroundColor:ia});G.appendChild(a);return a}(),O=new J,x=function(){var a=new $a;a.canvas=ua;a.container=O;return a}(),w=x.metronome,ma,e,g=[],Q=O.children,F,P,A,Z,m,$,ca=!1,R,Sa={normal:ha.powOut(Na),elastic:ha.oscOut(Oa,Pa),bounce:ha.bncOut(Ra,Qa)},Fa=Sa[Ma],ba={updateBricks:function(){if(ca){for(var a=F;a--;)e=Q[a],e.updateShadows(),Da(e);ca=
!1}else for(a=F;a--;)Q[a].updateShadows()}};Ta(U,J);U.prototype.updateShadows=function(){for(var a=this.y-this.yInit,b=this.neighbours,c=0,d=this.neighbours.length;d--;)c+=a-b[d].y+b[d].yInit;var c=c/(4*h),c=1-(0<c?1>c?c:1:0),e=Math.pow(c,6),d=e*K+(1-e)*ea,g=e*L+(1-e)*fa,e=e*M+(1-e)*ga;this.top.color=q(d,g,e,Math.max(1-2*l*(1-c),1-l));N&&(this.shadow.color=q(d,g,e,Math.max(1-2*l*(1-.92*c),1-l)),a=a-b[0].y+b[0].yInit,(a=0<a?a:0)?(this.hasShadow||(this.topContatiner.addChild(this.shadow),this.hasShadow=
!0),this.shadow.width=Math.min(ta*a,h)):this.hasShadow&&(this.topContatiner.removeChild(this.shadow),this.hasShadow=!1))};Ta(V,J);V.prototype.updateShadows=function(){for(var a=this.y-this.yInit,b=this.neighbours,c=0,d=this.neighbours.length;d--;)c+=a-b[d].y+b[d].yInit;var c=c/(4*h),c=1-(0<c?1>c?c:1:0),e=Math.pow(c,6),d=e*this.H+(1-e)*this.SH,g=e*this.S+(1-e)*this.SS,e=e*this.L+(1-e)*this.SL;this.top.color=q(d,g,e,Math.max(1-2*l*(1-c),1-l));N&&(this.shadow.color=q(d,g,e,Math.max(1-2*l*(1-.92*c),1-
l)),a=a-b[0].y+b[0].yInit,(a=0<a?a:0)?(this.hasShadow||(this.topContatiner.addChild(this.shadow),this.hasShadow=!0),this.shadow.width=Math.min(ta*a,h)):this.hasShadow&&(this.topContatiner.removeChild(this.shadow),this.hasShadow=!1))};window.addEventListener("resize",S);this.resize=function(){S()};this.destroy=function(){C.instances[c]=null;w.removeAllListeners();w.removeUpdateListener(ba,"updateBricks");document.removeEventListener("mousemove",aa);window.removeEventListener("resize",S);G.removeChild(ua);
G=c=a=h=t=Ha=Ia=u=W=X=Y=Ja=Ka=La=ja=ka=la=l=za=oa=E=pa=xa=v=p=D=qa=Ma=Ga=Na=Oa=Pa=Qa=Ra=N=ta=z=sa=s=ra=n=T=wa=na=I=da=K=L=M=ea=fa=ga=va=ia=ua=O=x=w=ma=e=g=Q=F=P=A=Z=m=$=ca=R=Sa=Fa=ba=V=U=r=H=Ba=Ca=Da=aa=S=null;this.resize=this.destroy=Aa};S()}else alert("Pave ERROR: There is no element with the specified id")}var Ta=jsband.extend,Ya=jsband.getHslComponents,ha=jsband.Ease,Ea=jsband.Tween,J=jsband.CanvasContainer,$a=jsband.CanvasComposition,Ua=jsband.EventDispatcherBehaivor,Za=jsband.CssProp,r=jsband.Matrix,
Va=jsband.Swing,H=jsband.Wave,Wa=ha.powOut(3),Xa={normal:1,elastic:1,bounce:1},ya={sine:H.sin,linear:H.triangle,pulse:H.pulse},d=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY;k.prototype={className:"SimpleRectLayer",superclassName:"CanvasLayer",constructor:k,get name(){return this.__name},set name(b){var a=this.parent;if(a)if("string"==typeof b){if(!(b in a)||"parent"in a[b]&&a[b].parent==a&&a[b].name===b)a[b]=this}else this.__name in a&&a[this.__name]==this&&delete a[this.__name];this.__name=
b},setContext:function(b){this.__context=b},setStage:function(b){this.__stage=b;if(this.onDisplayed&&b)this.onDisplayed()},calc:function(){this.matrixLocal=r.get(this.x,this.y,this.rotation,this.scaleX,this.scaleY);this.matrixGlobal=r.multiply(this.parent.matrixGlobal,this.matrixLocal)},draw:function(){var b=this.__context;b.save();r.setTransform(b,this.matrixGlobal);b.globalAlpha*=this.alpha;b.fillStyle=this.color;b.fillRect(-this.originX,-this.originY,this.width,this.height);b.restore()},isolate:function(){this.__context=
this.__stage=this.parent=null},hitTest:function(b,a){var d=this.__context;r.setTransform(d,this.matrixGlobal);d.beginPath();d.rect(-this.originX,-this.originY,this.width,this.height);var k=d.isPointInPath(b,a);d.closePath();return k}};C.instances={};window.Pave=C})();
